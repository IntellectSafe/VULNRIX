{% extends "base.html" %} {% block title %}Scan Results - Digital Footprint
Shield{% endblock %} {% block content %} {% if error %}
<div class="error-message">
  <h2>‚ùå Error</h2>
  <p>{{ error }}</p>
  <a href="{{ url_for('home') }}" class="btn btn-primary">Try Again</a>
</div>
{% elif results %}
<div class="results-container">
  <div class="results-header">
    <h2>Scan Results</h2>
    <a href="{{ url_for('home') }}" class="btn btn-secondary">New Scan</a>
  </div>

  <!-- Input Summary -->
  <div class="result-section">
    <h3>üìã Input Information</h3>
    <div class="info-grid">
      {% if results.input.name %}
      <div class="info-item">
        <strong>Name:</strong> {{ results.input.name }}
      </div>
      {% endif %} {% if results.input.email %}
      <div class="info-item">
        <strong>Email:</strong> {{ results.input.email }}
      </div>
      {% endif %} {% if results.input.username %}
      <div class="info-item">
        <strong>Username:</strong> {{ results.input.username }}
      </div>
      {% endif %}
    </div>
  </div>

  <!-- Risk Score -->
  <div class="result-section">
    <h3>üìä Risk Assessment</h3>
    <div class="risk-score-card risk-{{ results.risk_score.class }}">
      <div class="risk-score-value">{{ results.risk_score.score }}/100</div>
      <div class="risk-score-level">{{ results.risk_score.level }}</div>
      <div class="risk-score-bar">
        <div
          class="risk-score-fill"
          data-score="{{ results.risk_score.score }}"
        ></div>
      </div>
    </div>

    <div class="breakdown-grid">
      <div class="breakdown-item">
        <div class="breakdown-label">Public Exposure</div>
        <div class="breakdown-value">
          {{ results.breakdown.public_exposure.score }}/50
        </div>
      </div>
      <div class="breakdown-item">
        <div class="breakdown-label">Sensitive Exposure</div>
        <div class="breakdown-value">
          {{ results.breakdown.sensitive_exposure.score }}/50
        </div>
      </div>
    </div>

    {% if results.breakdown.is_famous %}
    <div class="fame-notice">
      ‚ÑπÔ∏è Public figure detected. Public mentions are expected.
    </div>
    {% endif %}
  </div>

  <!-- Web Search Results -->
  <div class="result-section">
    <h3>üîç Web Search Results</h3>

    {% if results.search_results.name %}
    <div class="search-results-group">
      <h4>Name Mentions ({{ results.search_results.name|length }})</h4>
      {% for result in results.search_results.name %}
      <div class="search-result-item">
        <div class="result-title">
          <a href="{{ result.link }}" target="_blank">{{ result.title }}</a>
        </div>
        <div class="result-url">{{ result.link }}</div>
        <div class="result-snippet">{{ result.snippet }}</div>
      </div>
      {% endfor %}
    </div>
    {% endif %} {% if results.search_results.email %}
    <div class="search-results-group">
      <h4>Email Mentions ({{ results.search_results.email|length }}) ‚ö†Ô∏è</h4>
      {% for result in results.search_results.email %}
      <div class="search-result-item danger">
        <div class="result-title">
          <a href="{{ result.link }}" target="_blank">{{ result.title }}</a>
        </div>
        <div class="result-url">{{ result.link }}</div>
        <div class="result-snippet">{{ result.snippet }}</div>
      </div>
      {% endfor %}
    </div>
    {% endif %} {% if results.search_results.username %}
    <div class="search-results-group">
      <h4>Username Mentions ({{ results.search_results.username|length }})</h4>
      {% for result in results.search_results.username %}
      <div class="search-result-item">
        <div class="result-title">
          <a href="{{ result.link }}" target="_blank">{{ result.title }}</a>
        </div>
        <div class="result-url">{{ result.link }}</div>
        <div class="result-snippet">{{ result.snippet }}</div>
      </div>
      {% endfor %}
    </div>
    {% endif %} {% if not results.search_results.name and not
    results.search_results.email and not results.search_results.username %}
    <p class="no-results">‚úÖ No online mentions found in search results.</p>
    {% endif %}
  </div>

  <!-- Breach Data -->
  <div class="result-section">
    <h3>üö® Data Breach Check</h3>

    {% if results.breach_data.total_breaches > 0 %}
    <div class="breach-alert danger">
      <h4>Found {{ results.breach_data.total_breaches }} Data Breach(es)</h4>
      <ul class="breach-list">
        {% for breach in results.breach_data.breaches %}
        <li>
          <strong>{{ breach.Name }}</strong> ({{ breach.Domain }}) - Breached:
          {{ breach.BreachDate }}
        </li>
        {% endfor %}
      </ul>
    </div>
    {% else %}
    <p class="no-results">‚úÖ No known data breaches found.</p>
    {% endif %} {% if results.breach_data.pastes|length > 0 %}
    <div class="breach-alert warning">
      <h4>Found {{ results.breach_data.pastes|length }} Paste(s)</h4>
      <ul class="breach-list">
        {% for paste in results.breach_data.pastes %}
        <li><strong>{{ paste.Source }}</strong> (ID: {{ paste.Id }})</li>
        {% endfor %}
      </ul>
    </div>
    {% else %}
    <p class="no-results">‚úÖ No pastes found.</p>
    {% endif %}
  </div>

  <!-- Recommendations -->
  <div class="result-section">
    <h3>üí° Privacy Recommendations</h3>
    <div class="recommendations-list">
      {% for recommendation in results.recommendations %}
      <div class="recommendation-item">{{ recommendation }}</div>
      {% endfor %}
    </div>
  </div>
</div>
{% else %}
<div class="error-message">
  <h2>No Results</h2>
  <p>No scan results available. Please start a new scan.</p>
  <a href="{{ url_for('home') }}" class="btn btn-primary">Start New Scan</a>
</div>
{% endif %} {% endblock %} {% block scripts %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    document
      .querySelectorAll(".risk-score-fill[data-score]")
      .forEach(function (el) {
        var score = parseFloat(el.getAttribute("data-score"));
        if (!isNaN(score)) {
          if (score < 0) score = 0;
          if (score > 100) score = 100;
          el.style.width = score + "%";
        }
      });
  });
</script>
{% endblock %}
